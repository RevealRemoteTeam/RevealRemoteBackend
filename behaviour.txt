Browser #1, socket #1 connects, handshakes with { magic: "hello", nickname: "jack" }. Server finds handshake valid, stores handshake data in a key-value store like { "uid-uid-uid-uid": { handshake: { magic: "hello", nickname: "jack" }, socket: socket } }. Server emits "ok" event with { uid: "uid-uid-uid-uid" }. Browser #1 stores "uid". Upon reconnection browser handshakes with { uid: "uid-uid-uid-uid" }. Server detects a "uid" in the handshake data. Server changes "socket" property of the "uid-uid-uid-uid" property in the store to the new socket instance, kicks the old socket.